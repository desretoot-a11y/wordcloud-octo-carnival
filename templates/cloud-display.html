<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–±–ª–∞–∫–æ —Å–ª–æ–≤ - –ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cloud-display.css') }}">
</head>
<body>
    <div class="title">
        <h1>–û–±–ª–∞–∫–æ —Å–ª–æ–≤</h1>
        <p>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ —Å–ª–æ–≤</p>
    </div>
    
    <div class="cloud-container">
        <img id="word-cloud" src="{{ url_for('global_cloud_image') }}?ts={{ ts }}" alt="–û–±–ª–∞–∫–æ —Å–ª–æ–≤">
        
        <div class="controls">
            <button class="btn refresh-btn" onclick="refreshCloud()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            <button class="btn fullscreen-btn" onclick="toggleFullscreen()">‚õ∂ –ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω</button>
        </div>
        
        <div class="watermark">
            –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
        </div>
    </div>

    <script>
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±–ª–∞–∫–∞
        function refreshCloud() {
            const img = document.getElementById("word-cloud");
            img.src = "{{ url_for('global_cloud_image') }}?ts=" + Date.now();
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º: ${err.message}`);
                });
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }
        
        // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω
        function updateBackground() {
            const hue = (Date.now() / 10000) % 360;
            document.body.style.background = `
                linear-gradient(135deg, 
                hsl(${hue}, 30%, 95%), 
                hsl(${(hue + 120) % 360}, 30%, 98%), 
                hsl(${(hue + 240) % 360}, 30%, 95%)
            `;
        }
        
        // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        setInterval(refreshCloud, 30000);
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.onload = function() {
            updateBackground();
            setInterval(updateBackground, 10000);
        };
    </script>
</body>
</html>
